{"version":3,"file":"js/41.85886c93.js","mappings":"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","sources":["webpack://app-boilerplate/./src/api/getMyTemplates.js","webpack://app-boilerplate/./src/composition/useToast.js","webpack://app-boilerplate/./src/store/station.js","webpack://app-boilerplate/./src/pages/Templates.vue","webpack://app-boilerplate/./src/pages/Templates.vue?961c"],"sourcesContent":["import api from './index'\n\nexport default {\n    add(announcements) {\n        return api.post('saveTemplate', announcements)\n    },\n    get() {\n        return api.get('mytemplates')\n    },\n    list(params) {\n        return api.post('mytemplates', params)\n    },\n    update(announcements) {\n        return api.patch('mytemplates', announcements)\n    },\n    delete(id) {\n        return api.delete('deleteTemplate/'+ id)\n    },\n}","import { toastController } from \"@ionic/vue\";\n\nexport default function () {\n  /**\n   * Shows a notification\n   * @param {string} message\n   * @param {string} color\n   * @param {string} position\n   * @param {number} duration\n   * @returns\n   */\n  async function openToast(message, color, position = \"top\", duration = 3000) {\n    const toast = await toastController.create({\n      message,\n      position,\n      color,\n      duration,\n    });\n\n    return toast.present();\n  }\n\n  return {\n    openToast,\n  };\n}\n","import { defineStore } from 'pinia';\n\nexport const stationStore = defineStore({\n    id: 'stn',\n    state: () => ({\n        alert: null,\n        stn: [],\n    }),\n    actions: {\n        success(message) {\n            this.alert = { message, type: 'alert-success' };\n        },\n        error(message) {\n            this.alert = { message, type: 'alert-danger' };\n        },\n        clear() {\n            this.alert = null;\n        },\n        stations(stn) {\n            this.stn = []\n            this.stn = stn;\n        },\n    },\n    getters: {\n      getStations() {\n        return this.stn\n      },\n    },\n});","<template>\n  <KeepAlive>\n    <base-layout :show-tool-bar-menu=\"true\" color-type=\"secondary\" page-title=\"Templates\">\n      <ion-card>\n        <ion-card-content>\n          <ion-button expand=\"block\" @click=\"redirect()\"\n            ><ion-icon name=\"add-outline\"></ion-icon>Add</ion-button\n          >\n        </ion-card-content>\n      </ion-card>\n      <ion-list lines=\"full\">\n        <ion-card v-for=\"e in templates_list\">\n          <ion-card-header>\n            <ion-card-subtitle v-if=\"e.row_status == 1\"\n              ><ion-badge color=\"primary\">Active</ion-badge></ion-card-subtitle\n            >\n            <ion-card-subtitle v-else=\"e.row_status == 1\"\n              ><ion-badge color=\"danger\">Inactive</ion-badge></ion-card-subtitle\n            >\n            <ion-card-title>{{ e.template_name }}</ion-card-title>\n          </ion-card-header>\n\n          <ion-card-content>\n            <!-- {{ e.group_numbers }} -->\n            <ion-grid>\n              <ion-row>\n                <ion-col\n                  ><ion-button\n                    expand=\"block\"\n                    color=\"danger\"\n                    fill=\"outline\"\n                    @click=\"deleteTmp(e)\"\n                    ><ion-icon name=\"trash-outline\"></ion-icon>Delete</ion-button\n                  ></ion-col\n                >\n                <ion-col\n                  ><ion-button expand=\"block\" color=\"success\" fill=\"outline\"\n                    @click=\"editTmp(e)\"\n                    ><ion-icon name=\"create-outline\"></ion-icon>Edit</ion-button\n                  ></ion-col\n                >\n              </ion-row>\n            </ion-grid>\n          </ion-card-content>\n        </ion-card>\n      </ion-list>\n    </base-layout>\n  </KeepAlive>\n</template>\n\n<script>\nimport { ref, onMounted, onIonViewDidEnter, computed } from \"vue\";\nimport Templates from \"@/api/getMyTemplates\";\nimport { defineStore } from \"pinia\";\nimport { stationStore } from \"../store/station\";\nimport { useRouter } from \"vue-router\";\nimport useToast from \"../composition/useToast\";\nimport { Preferences } from \"@capacitor/preferences\";\nimport { useUserStore } from \"../store/user\";\nimport emitter from \"../plugins/emitter\";\nimport { IonButton, alertController } from \"@ionic/vue\";\nimport {\n  loadingController,\n} from '@ionic/vue';\n\nexport default {\n  setup() {\n    const templates_list = ref([]);\n    const Contact_list = ref([]);\n    const stnVal = ref([]);\n    const stnInput = ref([]);\n    const stnStore = stationStore();\n    const censusResults = computed(() => stnStore.getStations);\n    const isScheduled = ref(false);\n    const form = ref({\n      date: null,\n      receiver: null,\n      template: null,\n      message: null,\n    });\n    const { openToast } = useToast();\n\n    const userStore = useUserStore();\n    const format = (date) => {\n      const day = date.getDate();\n      const month = date.getMonth() + 1;\n      const year = date.getFullYear();\n      return `Selected date is ${day}/${month}/${year}`;\n    };\n\n    onMounted(async () => {\n      showLoading();\n      await loadTemplates();\n    });\n\n    const router = useRouter();\n\n    async function showLoading() {\n      const load = await loadingController.create({\n        message: 'Loading...',\n        backdropDismiss: true,\n        spinner: 'circles'\n      });\n      load.present();\n    }\n\n    const dismissLoading = async () => {\n      await loadingController.dismiss()\n    }\n\n    function redirect() {\n      router.push({\n        name: \"Manage-template\",\n        params: {\n          propKey: JSON.stringify(form),\n        },\n      });\n    }\n\n    async function selectTemplate(ev) {\n      console.log(ev);\n      const a = this.templates_list.find((e) => e.template_id == ev.detail.value);\n      console.log(a.template_descr);\n      this.form.message = a.template_descr;\n    }\n\n    function loadTemplates() {\n      Templates.get()\n        .then((response) => {\n          templates_list.value = []\n          response.data.data.forEach((element) => {\n            templates_list.value.push(element);\n          });\n          dismissLoading();\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally();\n    }\n\n    async function deleteTmp(e) {\n      return new Promise(async (resolve) => {\n        const confirm = await alertController.create({\n          header: \"Delete Template\",\n          message: e.template_name,\n          buttons: [\n            {\n              text: \"Cancel\",\n              role: \"cancel\",\n              handler: () => {\n                return resolve(false);\n              },\n            },\n            {\n              text: \"OK\",\n              handler: () => {\n                Templates.delete(e.template_id)\n                  .then((response) => {\n                    loadTemplates();\n                  })\n                  .catch((err) => {\n                    console.log(err);\n                  })\n                  .finally();\n                return resolve(true);\n              },\n            },\n          ],\n        });\n        await confirm.present();\n      });\n    }\n\n    async function editTmp(e) {\n      router.push({\n        name: \"Manage-template\",\n        params: {\n          propKey: JSON.stringify(e),\n        },\n      });\n    }\n\n    return {\n      redirect,\n      selectTemplate,\n      templates_list,\n      Contact_list,\n      stnVal,\n      loadTemplates,\n      form,\n      deleteTmp,\n      editTmp,\n      censusResults,\n      showLoading,\n      dismissLoading,\n    };\n  },\n};\n</script>\n\n<style>\nion-list {\n  overflow: hidden;\n  overflow-y: auto;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n}\n\nion-card .list-md {\n  max-height: 290px !important;\n}\n</style>\n","import { render } from \"./Templates.vue?vue&type=template&id=2981a4d2\"\nimport script from \"./Templates.vue?vue&type=script&lang=js\"\nexport * from \"./Templates.vue?vue&type=script&lang=js\"\n\nimport \"./Templates.vue?vue&type=style&index=0&id=2981a4d2&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["add","announcements","api","post","get","list","params","update","patch","delete","id","async","openToast","message","color","position","duration","toast","toastController","create","present","stationStore","defineStore","state","alert","stn","actions","success","this","type","error","clear","stations","getters","getStations","_createBlock","_KeepAlive","_createVNode","_component_base_layout","_component_ion_card","_component_ion_card_content","_component_ion_button","expand","onClick","_cache","$event","$setup","redirect","_component_ion_icon","name","_component_ion_list","lines","_createElementBlock","_Fragment","_renderList","templates_list","e","_component_ion_card_header","row_status","_component_ion_card_subtitle","key","_component_ion_badge","_component_ion_card_title","template_name","_component_ion_grid","_component_ion_row","_component_ion_col","fill","deleteTmp","editTmp","setup","ref","Contact_list","stnVal","stnStore","censusResults","computed","form","date","receiver","template","useToast","useUserStore","onMounted","showLoading","loadTemplates","router","useRouter","load","loadingController","backdropDismiss","spinner","dismissLoading","dismiss","push","propKey","JSON","stringify","selectTemplate","ev","console","log","a","find","template_id","detail","value","template_descr","Templates","then","response","data","forEach","element","catch","err","finally","Promise","confirm","alertController","header","buttons","text","role","handler","resolve","__exports__","render"],"sourceRoot":""}