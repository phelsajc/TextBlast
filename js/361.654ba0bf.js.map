{"version":3,"file":"js/361.654ba0bf.js","mappings":"2KAEe,SAAS,IAStBA,eAAeC,EAAUC,EAASC,EAAOC,EAAW,MAAOC,EAAW,KACpE,MAAMC,QAAcC,EAAAA,GAAgBC,OAAO,CACzCN,UACAE,WACAD,QACAE,aAGF,OAAOC,EAAMG,SACf,CAEA,MAAO,CACLR,YAEJ,C,4oBCkEM,KAAES,EAAI,QAAEC,EAAO,OAAEC,EAAM,GAAEC,IAAOC,EAAAA,EAAAA,IAAOC,GAEvCC,GAAUC,EAAAA,EAAAA,KAAS,IAChBP,EAAKQ,OAASP,EAAQO,OAASN,EAAOM,QAGzCC,GAASC,EAAAA,EAAAA,MAEf,SAASC,IACFR,EAAGK,OAERC,EAAOG,KAAKT,EAAGK,MACjB,C,k4BCjGA,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,0KCLe,SAAS,IACtB,MAAMJ,GAASC,EAAAA,EAAAA,MASf,SAASI,EAAWC,EAAYC,EAAaC,GAAS,GACpD,IAAKA,EASH,OARAR,EAAOG,KAAK,CACVM,KAAMC,EAAAA,EAAiBJ,IAAe,SACtCK,OAAQJ,IAEVK,QAAQC,IAAI,UACZD,QAAQC,IAAIL,GACZI,QAAQC,IAAIN,QACZK,QAAQC,IAAIH,EAAAA,EAAiBJ,IAI/B,MAAMQ,EAAWd,EAAOe,QAAQ,CAC9BN,KAAMC,EAAAA,EAAiBJ,IAAe,SACtCK,OAAQJ,IAGVS,OAAOC,SAAWH,EAASI,IAC7B,CAEA,MAAO,CACLb,aAEJ,C,cCjCe,SAAS,IACtB,MAAM,UAAEvB,IAAcqC,EAAAA,EAAAA,MAChB,WAAEd,GAAee,IACjBC,GAAaC,EAAAA,EAAAA,KAElBzC,eAAe0C,EAAUC,GACxB,MAAMC,EAAO,CACXC,SAAUF,EAAgBE,SAC1BC,SAAUH,EAAgBG,gBAGtBN,EACHO,MAAMH,GACNI,MAAMC,IACLhD,EAAU,sBAAuB,UAAW,OAE5CuB,EAAWyB,EAASL,KAAKM,SAAU,CACjCC,gBAAiBF,EAASG,cAC1B,IAIHC,OAAOC,IACNrD,EAAU,+BAAgC,SAAU,OAC9CsD,QAAQC,OAAOF,KAE3B,CAEA,MAAO,CACLZ,YACAzC,YACAuB,aAEJ,C,yCC4DA,MAAM,UAAEkB,GAAcK,IAGhBU,IAFSrC,EAAAA,EAAAA,OAEMsC,EAAAA,EAAAA,KAAI,IAEnBC,GAAOD,EAAAA,EAAAA,IAAI,CACfE,KAAI,MACJC,IAAG,MACHC,IAAG,MACHC,OAAM,MACNC,MAAK,MACLC,aAAYA,EAAAA,MAGRC,GAASR,EAAAA,EAAAA,IAAI,CACjBb,SAAU,YACVC,SAAU,YAGNqB,GAAgBT,EAAAA,EAAAA,IAAI,CACxBb,SAAU,GACVC,SAAU,MAGZsB,EAAAA,EAAAA,KAAU,SAKV,MAAMC,GAAUX,EAAAA,EAAAA,KAAI,GAElB1D,eAAesE,IACf,GAAKC,IAAL,CAEAF,EAAQnD,OAAQ,EAEhB,UAEQwB,EAAUwB,EAAOhD,OACtB8B,MAAK,KACJwB,EAAAA,EAAQC,KAAK,SAAS,IAKdC,SAAQ,KAChBL,EAAQnD,OAAQ,CAAK,GAEzB,CAAE,MAAOyD,GACPC,MAAM,EACR,CAlB6B,CA0B/B,CACA,SAASL,IACP,IAAIM,GAAQ,EAYZ,OAVKX,EAAOhD,MAAM2B,WAChBsB,EAAcjD,MAAM2B,SAAW,gBAC/BgC,GAAQ,GAGLX,EAAOhD,MAAM4B,WAChBqB,EAAcjD,MAAM4B,SAAW,mBAC/B+B,GAAQ,GAGHA,CACT,C,miECpKA,MAAMtD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://app-boilerplate/./src/composition/useToast.js","webpack://app-boilerplate/./src/components/Button.vue","webpack://app-boilerplate/./src/components/Button.vue?4e0d","webpack://app-boilerplate/./src/composition/redirectToHome.js","webpack://app-boilerplate/./src/composition/login.js","webpack://app-boilerplate/./src/pages/Login.vue","webpack://app-boilerplate/./src/pages/Login.vue?619c"],"sourcesContent":["import { toastController } from \"@ionic/vue\";\n\nexport default function () {\n  /**\n   * Shows a notification\n   * @param {string} message\n   * @param {string} color\n   * @param {string} position\n   * @param {number} duration\n   * @returns\n   */\n  async function openToast(message, color, position = \"top\", duration = 3000) {\n    const toast = await toastController.create({\n      message,\n      position,\n      color,\n      duration,\n    });\n\n    return toast.present();\n  }\n\n  return {\n    openToast,\n  };\n}\n","<template>\n  <ion-button\n    class=\"btn ion-activatable ripple-parent\"\n    :color=\"color\"\n    :expand=\"expand\"\n    :size=\"size\"\n    :disabled=\"isLoading\"\n    :fill=\"fill\"\n    :download=\"download\"\n    :href=\"href\"\n    @click=\"!!to && redirectToRoute()\"\n  >\n    <ion-label v-if=\"text && !iconOnly\" :class=\"[hasIcon ? 'ml-2' : '']\">{{\n      text\n    }}</ion-label>\n    <ion-icon\n      :md=\"icon\"\n    ></ion-icon>\n    <ion-spinner\n      v-if=\"isLoading\"\n      slot=\"end\"\n      :class=\"iconOnly ? '' : 'ion-margin-start'\"\n      :name=\"spinnerName\"\n    ></ion-spinner>\n    <ion-ripple-effect type=\"unbounded\"></ion-ripple-effect>\n  </ion-button>\n</template>\n\n<script setup>\nimport { defineProps, computed, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nconst props = defineProps({\n  color: {\n    type: String,\n    default: \"primary\",\n  },\n  text: {\n    type: String,\n    required: false,\n  },\n  expand: {\n    type: String,\n    default: \"block\",\n  },\n  size: {\n    type: String,\n    default: \"medium\",\n  },\n  icon: {\n    default: null,\n    required: false,\n  },\n  iosIcon: {\n    default: null,\n    required: false,\n  },\n  mdIcon: {\n    default: null,\n    required: false,\n  },\n  isLoading: {\n    type: Boolean,\n    default: false,\n  },\n  spinnerName: {\n    type: String,\n    default: \"crescent\",\n  },\n  iconOnly: {\n    type: Boolean,\n    default: false,\n  },\n  fill: {\n    type: String,\n    default: \"solid\",\n  },\n  to: {\n    type: [String, Object],\n    required: false,\n  },\n  download: {\n    type: Boolean,\n    default: false,\n  },\n  href: {\n    type: String,\n    required: false,\n  },\n});\n\nconst { icon, iosIcon, mdIcon, to } = toRefs(props);\n\nconst hasIcon = computed(() => {\n  return icon.value || iosIcon.value || mdIcon.value;\n});\n\nconst router = useRouter();\n\nfunction redirectToRoute() {\n  if (!to.value) return;\n\n  router.push(to.value);\n}\n</script>\n\n<style scoped>\n.btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import script from \"./Button.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Button.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=1d883589&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1d883589\"]])\n\nexport default __exports__","import { useRouter } from \"vue-router\";\nimport HomeRoutesByUser from \"../enums/HomeRoutesByUser\";\n\nexport default function () {\n  const router = useRouter();\n\n  /**\n   * Redirect user by type\n   * @param {number | string} userTypeId\n   * @param {object} routeParams\n   * @param {boolean} reload\n   * @returns\n   */\n  function redirectTo(userTypeId, routeParams, reload = false) { \n    if (!reload) {\n      router.push({\n        name: HomeRoutesByUser[userTypeId] || \"logout\",\n        params: routeParams,\n      });\n      console.log('reload')\n      console.log(reload)\n      console.log(routeParams)\n      console.log(HomeRoutesByUser[userTypeId])\n      return;\n    }\n\n    const redirect = router.resolve({\n      name: HomeRoutesByUser[userTypeId] || \"logout\",\n      params: routeParams,\n    });\n\n    window.location = redirect.href;\n  }\n\n  return {\n    redirectTo,\n  };\n}\n","import { useLoginStore } from \"../store/login\";\nimport redirectToHome from \"./redirectToHome\";\nimport useToast from \"./useToast\";\n\nexport default function () {\n  const { openToast } = useToast();\n  const { redirectTo } = redirectToHome();\n  const loginStore = useLoginStore();\n\n   async function userLogin(userCredentials) {\n    const data = {\n      username: userCredentials.username,\n      password: userCredentials.password,\n    };\n\n    await loginStore\n      .login(data)\n      .then((response) => {\n        openToast(\"Logged with success\", \"success\", \"top\");\n        /* console.log(response) */\n        redirectTo(response.data.userType, {\n          anyCustomParams: response.customParams,\n        });\n\n       // return Promise.resolve();\n      })\n      .catch((ex) => {\n        openToast(\"Something was wrong on login\", \"danger\", \"top\");\n       return Promise.reject(ex);\n      });\n  }\n\n  return {\n    userLogin,\n    openToast,\n    redirectTo,\n  };\n}\n","<template>\n  <base-layout\n  color-type=\"dark\"\n  color-toolbar=\"dark\"\n  >\n    <ion-row>\n      <ion-col size=\"12\">\n        <Image style=\"height: 200px\" src=\"assets/icon/logo.png\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.mail\"></ion-icon>\n          <ion-input\n            v-model=\"fields.username\"\n            clear-input\n            required\n            label=\"E-mail\"\n            type=\"email\"\n            label-placement=\"floating\"\n            tabindex=\"1\"\n            inputmode=\"email\"\n            placeholder=\"admin\"\n            @input=\"errorMessages.username = ''\"\n          ></ion-input>\n        </ion-item>\n        <error-message :text=\"errorMessages.username\" />\n      </ion-col>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.key\"></ion-icon>\n          <ion-input\n            v-model=\"fields.password\"\n            required\n            name=\"password\"\n            label=\"Password\"\n            tabindex=\"2\"\n            label-placement=\"floating\"\n            placeholder=\"admin\"\n            clear-input\n            :type=\"showPassword ? 'text' : 'password'\"\n            @input=\"errorMessages.password = ''\"\n          ></ion-input>\n          <ion-icon\n            slot=\"end\"\n            :icon=\"showPassword ? Icon.eyeOff : Icon.eye\"\n            class=\"pointer\"\n            @click=\"showPassword = !showPassword\"\n          ></ion-icon>\n        </ion-item>\n        <error-message :text=\"errorMessages.password\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <Button\n          color=\"primary\"\n          text=\"Login\"\n          :icon=\"Icon.enterOutline\"\n          :is-loading=\"loading\"\n          @click=\"loginUser()\"\n        />\n      </ion-col>\n    </ion-row>\n    <!-- <ion-row class=\"ion-text-center\">\n      <ion-col size=\"12\">\n        <ion-text color=\"tertiary\" class=\"pointer\" @click=\"redirectToRecoveryPassword()\">\n          Forgot password?\n        </ion-text>\n      </ion-col>\n    </ion-row> -->\n  </base-layout>\n</template>\n\n<script setup>\nimport { enterOutline, mail, key, logIn, eye, eyeOff } from \"ionicons/icons\";\n\nimport {\n  IonInput,\n  IonRow,\n  IonCol,\n  IonItem,\n  IonIcon,\n  IonText,\n} from \"@ionic/vue\";\n\nimport { useRouter } from \"vue-router\";\nimport { ref,onMounted  } from \"vue\";\n//\n\n\nimport Button from \"../components/Button.vue\";\nimport Image from \"../components/Image.vue\";\nimport login from \"../composition/login\";\nimport emitter from \"../plugins/emitter\";\n\nconst { userLogin } = login();\nconst router = useRouter();\n\nconst showPassword = ref(false);\n\nconst Icon = ref({\n  mail,\n  key,\n  eye,\n  eyeOff,\n  logIn,\n  enterOutline,\n});\n\nconst fields = ref({\n  username: \"jclucasan\",\n  password: \"V4jYZr@\",\n});\n\nconst errorMessages = ref({\n  username: \"\",\n  password: \"\",\n});\n\nonMounted(() => {\n  \n})\n\n\nconst loading = ref(false);\n\n  async function loginUser() {\n  if (!validateFields()) return;\n\n  loading.value = true;\n\n  try {\n    \n    await userLogin(fields.value)\n    .then(() => {\n      emitter.emit(\"logged\");\n    })/* .catch((err) => {\n        console.log(\"Something was wrong on login\", \"danger\", \"top\");\n        alert(\"Something was wrong on login\", \"danger\", \"top\");\n        return Promise.reject(err);\n        }) */.finally(() => {\n      loading.value = false;\n        })\n  } catch (error) {\n    alert(0)\n  }\n\n      /* .catch((ex) => {\n        alert(\"Something was wrong on login\", \"danger\", \"top\");\n      }); */\n    /* .finally(() => {\n      loading.value = false;\n    }); */\n}\nfunction validateFields() {\n  let valid = true;\n\n  if (!fields.value.username) {\n    errorMessages.value.username = \"Email invalid\";\n    valid = false;\n  }\n\n  if (!fields.value.password) {\n    errorMessages.value.password = \"Password invalid\";\n    valid = false;\n  }\n\n  return valid;\n}\n\nfunction redirectToRecoveryPassword() {\n  router.push({ name: \"recovery-password\" });\n}\n</script>\n\n<style scoped>\n.form-field {\n  display: flex;\n  align-items: center;\n}\n\n.pointer {\n  cursor: pointer;\n}\n</style>\n./useEmitter","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=243a1f20&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-243a1f20\"]])\n\nexport default __exports__"],"names":["async","openToast","message","color","position","duration","toast","toastController","create","present","icon","iosIcon","mdIcon","to","toRefs","props","hasIcon","computed","value","router","useRouter","redirectToRoute","push","__exports__","redirectTo","userTypeId","routeParams","reload","name","HomeRoutesByUser","params","console","log","redirect","resolve","window","location","href","useToast","redirectToHome","loginStore","useLoginStore","userLogin","userCredentials","data","username","password","login","then","response","userType","anyCustomParams","customParams","catch","ex","Promise","reject","showPassword","ref","Icon","mail","key","eye","eyeOff","logIn","enterOutline","fields","errorMessages","onMounted","loading","loginUser","validateFields","emitter","emit","finally","error","alert","valid"],"sourceRoot":""}